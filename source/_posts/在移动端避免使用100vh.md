---
title: 在移动端避免使用100vh
date: 2019-12-06 10:21:55
categories: css
tags: 移动端开发
---

CSS中如果要设置元素的样式占据整个屏幕的高度，则可以设置height: 100vh。这样可以实现根据屏幕的高度而改变元素的高度，可以填充整个屏幕。

然而在实际中并非如此，100vh实现的功能在移动设备的浏览器中基本被破坏，使它基本没用。

核心原因就在于移动设备的浏览器中的地址栏，有时可见，有时隐藏，从而导致改变了视口的可见大小。
但浏览器的可见高度改变时，并不是把可见高度的部分自适应为100vh，反而是：这些浏览器将100vh设置为浏览器的高度，地址栏隐藏。导致的结果是，当地址栏可见时，屏幕的底部将被切断，从而从一开始就破坏了100vh的目的。

如下所示： 

![移动端100vh](http://ww1.sinaimg.cn/large/8c85763dly1g9msvf5xayj20qo0k0q3b.jpg)


当地址栏可见时，屏幕底部被切断，因为移动浏览器错误的将100vh设置为屏幕的高度，因此没有显示地址栏。在上图，本应该在屏幕底部被显示的按钮被隐藏了。

更糟糕的是，当用户第一次访问移动网站时，地址栏将显示在顶部，因此默认体验到的时错误的体验。


## 更好的解决方案：window.innerhight

解决此问题的一种方法是依靠javascript而不是CSS。页面加载时，将高度设置为window.innerHeight，这样可以正确的将高度设置为视口的高度。如果地址栏可见，window.innerHeight则将是全屏的高度。如果地址栏是隐藏的，window.innerHeight则将是屏幕上可见部分的高度，这正是我们所期望的。


遗憾的是，在不依赖JavaScript的情况下，仍然没有一种简单的方法来使元素占据整个视口高度。height: 100vh是如此接近的伟大，但给它在移动端浏览器上有局限性，最好避免这样使用它。