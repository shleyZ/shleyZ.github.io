---
title: '@bigtest介绍'
date: 2020-01-07 14:40:06
categories: bigtest
tags: bigtest
---

知道应用程序是否正常运行的最可靠方法是实际运行它。大型测试会在每个测试用例之前启动整个应用程序。

您的应用程序是否在浏览器中运行？然后，如果测试要衡量其是否有效，它还需要在真实用户可能使用的真实浏览器中运行，并且应该针对真实 DOM 分配真实的 UI 事件。

进行大型测试很困难，因为在您的应用程序中可能同时发生数百甚至数千个事情。包括用户互动。

BigTest 是一个旨在简化和快速接受所有单页应用程序（SPA）的框架，无论框架或库如何。

当我们在网络上构建应用时，我们希望能够在接近用户的地方对其进行测试。

真实用户将使用真实的浏览器来访问你的应用；那么测试是否是在真实的浏览器中进行的呢？
并非每个人都使用相同的浏览器，那么测试是否可以在多个不同的浏览器和设备上进行呢？
网络呢？您的应用可能会与网络进行对话，而您的测试也应该考虑到这一点，对吧？
更不用说一个人不会在组件级别上与您的应用进行交互。
他们正在一起使用整个应用程序。 您的所有组件相互协作以创造一种体验。

如果测试无法以与人使用应用程序相同的方式测试应用程序，那么你会对自己的 app 有信心吗？

在开始寻找最适合 SPA 的测试工具时，我们有一些要求：

- 快速
- 构建组件（包括可组合的组件）
- 跨浏览器（Firefox，IE，Safari 等
- 跨设备（Windows，macOS，iOS，Android 等）
- 跨框架（React，Vue，Ember，Angular 等）
- 跨测试框架（Mocha，Jasmine 等）

目前已经有类似的工具，如 Jest，但是这些测试无法在真正的浏览器中运行。还有赛普拉斯（Cypress），但截至本文撰写之时，您目前无法在 Chrome 之外使用它（其他不久将通过 webdriver 推出），并且还没有在组件中进行编写。

下面的对比：

| Test Framework | Fast | Cross Browser | Cross Device | Cross Test Runner | Cross Framework | Composable |
| -------------- | ---- | ------------- | ------------ | ----------------- | --------------- | ---------- |
| BigTest        | 🏎    | ✅            | ✅           | ✅                | ✅              | ✅         |
| Cypress        | 🚗   | ❌            | ❌           | ❌                | ✅              | ❌         |
| Selenium       | 🚌   | ✅            | ❌           | ✅                | ✅              | ❌         |
| Jest           | 🏎    | ❌            | ❌           | ❌                | ✅              | ❌         |

大多数现有框架都选中了其中一些（或部分选中了它们），但不是全部。
随着移动浏览在当今世界变得如此普遍，我们需要一种可以轻松地在我们手边的任何设备上运行测试（通过访问 URL）的工具。

## 测试理念

使用 BigTest 编写测试时，务必像用户将使用您的应用程序一样编写测试。
当某人与您的应用进行交互时，他们使用的鼠标和键盘将转换为您的应用响应的浏览器事件。
他们正在点击事物，期望取得成果。 这也是我们应用程序的测试所要做的：发送浏览器事件并断言有反馈。
我们都知道存在跨浏览器的错误！

如果是要访问组件或控制状态的测试，那不是适当的 BigTest。 所有互动都应来自用户群。
需要注意的另一件事是，确保您断言的是用户在应用中看到或交互的状态。

目的是进行交互，并观察由交互引发的页面上的正确变更。

## BigTest 如何运作？

BigTest 会将您的应用程序安装并呈现到浏览器中。然后将执行您编写的测试。
Interactor 驱动应用程序，它位于浏览器内部，带有 tests 和 render 的应用程序。
这是 BigTest 与其他测试框架之间的主要区别，BigTest 没有控制浏览器的单独过程。

这就是为什么您只需访问 URL 即可运行 BigTests 的原因。

在高层的 BigTest 中：

- 启动您的应用程序服务器（捆绑测试和应用程序）
- 启动浏览器
- 开始运行测试运行器
- Interactor 驱动应用程序（单击此处，访问路由等）
- 结果报告回 CLI

## 组成 BigTest 的软件包

BigTest 框架由几个小程序包组成，这些程序包也可以单独使用。了解这些软件包及其在 BigTest 框架中的作用是有帮助的。

### Convergence

[Convergence](https://bigtestjs.io/docs/convergence/) 是不可变，可重用和可组合的断言，使您可以立即知道何时达到期望的状态。
简而言之：它每 10 毫秒检查一次 DOM（默认情况下为 2 秒），以查看您要检查的状态是否存在。

Convergence 是 BigTest 中所有事物的基础。这就是使 interactors 可靠的原因。
CLI 中甚至将 Convergence 用于等待浏览器连接状态。

### Interactor

在生物学中， interactor 被定义为自然选择所作用的有机体的一部分。
BigTest interactor 定义了要对其进行测试的应用程序的一部分。
您可以将 interactor 视为现代组件的可组合页面对象。

interactor 是 BigTest 的灵魂，简而言之，我们将应用程序呈现到浏览器中，而交互器将其驱动。
他们使用 Convergence 来确保元素存在并且可以在执行所需的交互之前与之交互。

interactor 还与您使用现代组件获得的可组合性相匹配。这意味着您可以以类似于编写 UI 的方式来编写测试。

要了解有关 interactor 的更多信息，请务必查看[interactor guides](https://bigtestjs.io/guides/interactors/introduction)。

### CLI

BigTest CLI 旨在简化 SPA 中的验收测试设置（例如 setup，build tool integration 和浏览器启动）

您可以将 CLI 视为 Karma 或 Testem，但更易于设置并包含其他可与 BigTest 框架配合使用的有用 CLI 命令（例如 bigtest init）。
