---
title: 随机颜色生成
date: 2018-09-06 06:14:17
categories: javascript
---


## hsla颜色

H: Hue--色调 0(或360)表示红色，120表示绿色，240表示蓝色，也可取其他数值来指定颜色。取值为：0 - 360
S: Sturation--饱和度 取值为：0.0% - 100.0%
L: Lightness--亮度 取值为：0.0% - 100.0%
A: Alpha透明度。取值0~1之间

随机颜色：

``` js
let firstValue = Math.random() * 360;
let color = [];
color[0] = 'hsla(’ + firstValue + ‘, 75%, 40%, 1)'
```


如果需要一系列的很多颜色值，那么后续的颜色值的计算，只需要在前一个颜色的色相上偏转一个角度，就得到新的颜色值了。

把偏转角度设置成不是360度因数的值，可以防止后续颜色的重复循环，这样就可以得到无穷的适合的随机颜色序列。而且，偏转角度可以让前后的色彩保持足够的差异，让相邻颜色之间的视觉效果格外分明。


后续的第i个色相，可以通过旋转某个角度取得，比如

    color[i] =  ‘hsla(’ + ( firstValue + i * 222.5 ) + ‘, 75%, 50%, 0.3)’


用随机函数生成第一个色相，然后每次偏转222.5度（这个角度的叠加很难导致达到360的倍数，而且前后两个颜色的差异也足够大）


不支持IE6-8


## 闭包递归


``` js
let getRandomColor = function(){
    return  '#' +
    (function(color){
    return (color +=  '0123456789abcdef'[Math.floor(Math.random()*16)])
        && (color.length == 6) ?  color : arguments.callee(color);
    })('');
} 
```

## 方法三

``` js
let getRandomColor = function(){
    return '#'+Math.floor(Math.random()*16777215).toString(16);
}
```

hex颜色值是从#000000到#ffffff，后面那六位数是16进制数，相当于"0x000000"到"0xffffff"。

这实现的思路是将hex的最大值ffffff先转换为10进制，进行random后再转换回16进制

## 方法四

``` js
let getRandomColor = function(){
    return '#'+(Math.random()*0xffffff<<0).toString(16);
}
```

实现方法三的改进，利用左移运算符把0xffffff转化为整型。这样就不用记16777215了。由于左移运算符的优先级比不上乘号，因此随机后再左移


## 方法五

``` js
let getRandomColor = function(){
    return '#'+(function(h){
    return new Array(7-h.length).join("0")+h
    })((Math.random()*0x1000000<<0).toString(16))
}
```

修正上面版本的bug（无法生成纯白色与hex位数不足问题）。0x1000000相当0xffffff+1，确保会抽选到0xffffff。在闭包里我们处理hex值不足6位的问题，直接在未位补零。


## 方法六

``` js
let getRandomColor = function(){
    return '#'+('00000'+(Math.random()*0x1000000<<0).toString(16)).slice(-6);
}
```

这次在前面补零，连递归检测也省了